(function(n){if(!Array.prototype.indexOf)Array.prototype.indexOf=function(t,i){if(this===n||this===null)throw new TypeError('"this" is null or not defined');var r=this.length>>>0;i=+i||0;if(Math.abs(i)===Infinity)i=0;if(i<0){i+=r;if(i<0)i=0}for(;i<r;i++)if(this[i]===t)return i;return-1};function rr(n){if(!n.console)n.console={};var i=["log","info","warn","error","debug","trace","dir","group","groupCollapsed","groupEnd","time","timeEnd","profile","profileEnd","dirxml","assert","count","markTimeline","timeStamp","clear"];for(var t=0;t<i.length;t++)if(!n.console[i[t]])n.console[i[t]]=p}rr(window);var st;function pr(){var n=navigator.userAgent.toLowerCase();return n.indexOf("msie")!=-1?parseInt(n.split("msie")[1],10):false}function dr(){var n=pr();if(n&&n<8)st=true}dr();function pi(n){var t=n.JSON;if(t==null||typeof t!="object"||typeof t.stringify!="function")n.document.write('<script src="//cdnjs.cloudflare.com/ajax/libs/json3/3.2.6/json3.min.js"><\/script>')}pi(window);if(!String.prototype.trim)String.prototype.trim=function(){rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;return this.replace(rtrim,"")};var r=this.document;var f={inspProviderServerPath:"//appapi.inspsearchapi.com/search/client",segmentConfigUrl:"//appapi.inspsearchapi.com/clientsettings",isTest:false,eventEndpointUrl:"//eventlog.inspsearchapi.com/eventlogging/log",loggingEndpointUrl:"//appapi.inspsearchapi.com/clientlogger",imageUrl:"//csr.inspsearchapi.com/images",scriptsUrl:"//csr.inspsearchapi.com/lib",logWarnings:false};function yu(){var t=arguments[0];for(var n=0;n<arguments.length-1;n++){var i=new RegExp("\\{"+n+"\\}","gm");t=t.replace(i,arguments[n+1])}return t}(function(n,t,i,r,u,f){n[r]=n[r]||function(){(n[r].q=n[r].q||[]).push(arguments)},n[r].t=1*new Date;u=t.createElement(i),f=t.getElementsByTagName(i)[0];u.async=1;u.src="//www.google.com/adsense/search/async-ads.js";f.parentNode.insertBefore(u,f)})(window,r,"script","_googCsa");function u(){var r,o,i,e,s,c,t=arguments[0]||{},f=1,a=arguments.length,l=false;if(typeof t=="boolean"){l=t;t=arguments[f]||{};f++}if(typeof t!="object"&&!hu(t))t={};if(f===a)throw"Target object to extend was not specified";for(;f<a;f++)if((s=arguments[f])!=null)for(e in s){r=t[e];i=s[e];if(t===i)continue;if(l&&i&&(k(i)||(o=h(i)))){if(o){o=false;c=r&&h(r)?r:[]}else c=r&&k(r)?r:{};t[e]=u(l,c,i)}else if(i!==n)t[e]=i}return t}var ki=Object.prototype.hasOwnProperty;function g(n){if(n==null)return true;if(n.length&&n.length>0)return false;if(n.length===0)return true;for(var t in n)if(ki.call(n,t))return false;return true}var v,k;(function(t,i){var e="Boolean Number String Function Array Date RegExp Object Error".split(" ");for(var f=0,u;u=e[f];f++)t["[object "+u+"]"]=u.toLowerCase();var r=t.hasOwnProperty;var o=t.toString;v=function(n){return n==null?n+"":typeof n=="object"||typeof n=="function"?t[o.call(n)]||"object":typeof n};k=function(t){var u;if(!t||v(t)!=="object"||t.nodeType||cu(t))return false;try{if(t.constructor&&!r.call(t,"constructor")&&!r.call(t.constructor.prototype,"isPrototypeOf"))return false}catch(f){return false}if(i.ownLast)for(u in t)return r.call(t,u);for(u in t);return u===n||r.call(t,u)}})({},{});var h=Array.isArray||function(n){return v(n)==="array"};function hu(n){return v(n)==="function"}function cu(n){return n!=null&&n==n.window}function l(n,t){return n.replace(/\{([\w\.]*)\}/g,function(n,i){var u=i.split("."),r=t[u.shift()];for(var f=0,e=u.length;f<e;f++)r=r[u[f]];return typeof r!="undefined"&&r!==null?r:""})}function p(){}function bi(n){if(!n)return null;var e=new Date;var o=new Date(n);var t=e-o;if(isNaN(t)||t<0)return null;var f=1000,r=f*60,u=r*60,i=u*24,s=i*7;return t<f*2?"just now":t<r?Math.floor(t/f)+" seconds ago":t<r*2?"about 1 minute ago":t<u?Math.floor(t/r)+" minutes ago":t<u*2?"about 1 hour ago":t<i?Math.floor(t/u)+" hours ago":t>i&&t<i*2?"yesterday":t<i*365?Math.floor(t/i)+" days ago":"over a year ago"}function ei(n){var t={};this.getPlugins=function(){return t};this.setPlugins=function(n){if(n&&typeof n=="object")i(t,n)};function i(n,t,u){if(t==null){r(u,t);n=t}else if(typeof t=="function"){r(u);n=t(n)}else if(typeof t=="object"){if(n==null)n={};for(var f in t)if(t.hasOwnProperty(f)){var e=(u?u+".":"")+f;n[f]=i(n[f],t[f],e)}}return n}function r(t,i){var r=n&&n.observe;if(typeof r=="function")r(t,i)}}function uu(){this.observe=function(n,i){if(t.event&&typeof t.event.log=="function")t.event.log({message:"A plugin was registered.",namespace:n,value:i})}}var e=new ei(new uu);(function(){function n(){var a={UNKNOWN:0,METRIC:1,ERROR:2};var e={UNKNOWN:0,LOW:1,MEDIUM:2,HIGH:3,FATAL:4};var v=10;var y=100;var o=5;var p=1000;var s=2000;var n=this;var i=[];var h=null;this.actionId="";this.metadata={};this.debug=false;function d(){g();tt()}function g(){var n=function(){r("Caught window unload. Force-sending data.");k(true)};c("onbeforeunload",n);c("onunload",n)}var nt=function(t,i,r,u,f){n.logError({message:t,url:i,line:r,column:u,errorObj:f})};function tt(){c("onerror",nt)}function c(n,t){var i=window[n];window[n]=function(){t.apply(this,arguments);if(i)i.apply(this,arguments)}}this.registerWindowErrorHandler=function(n){if(n)window.onerror=function(){n.apply(this,arguments)}};function r(){if(n.debug)console.log.apply(this,arguments)}this.setOptions=function(n){var i;i=n.bufferLimit;if(t(i))v=Math.max(1,i);i=n.retryLimit;if(t(i))o=Math.max(0,i);i=n.retryInterval;if(t(i))p=Math.max(0,i);i=n.bufferInterval;if(t(i))y=Math.max(0,i);i=n.requestTimeout;if(t(i))s=Math.max(0,i)};function t(n){return typeof n=="number"}this.logWarning=function(n){l(n,e.MEDIUM)};this.logError=function(n){l(n,e.HIGH)};this.logFatal=function(n){l(n,e.FATAL)};function l(t,i){if(typeof t!="object")t={message:t};t=u({},n.metadata,t);w({type:a.ERROR,level:i,data:t})}this.logMetric=function(t,i){var r=u({},n.metadata,{name:t,value:i});w({type:a.METRIC,data:r})};function w(n){i.push({data:n,retriesRemaining:o});b(y)}function b(n){if(!h)h=window.setTimeout(k,n)}function k(n){h=null;var t;while((t=Math.min(v,i.length))>0){var r=i.splice(0,t);ut({data:it(r),isSyncPost:n,onerror:rt(r,n)})}}function it(t){var r=[];for(var i=0;i<t.length;i++)r.push(t[i].data);return{actionId:n.actionId,events:r}}function rt(n,t){return function(){r("Error posting event.",arguments);if(t)r("Dropping event after failed synchronous post attempt.",u.data);else{for(var f=0;f<n.length;f++){var u=n[f];if(--u.retriesRemaining>0)i.push(u);else r("Dropping event after "+o+" failed post attempts.",u.data)}b(p)}}}function ut(n){try{if(ft())ot(n);else if(et())st(n)}catch(t){n.onerror(t)}}function ft(){return typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}function et(){return typeof XDomainRequest!="undefined"}function ot(n){var t=new XMLHttpRequest;t.onerror=n.onerror;t.open("POST",f.eventEndpointUrl,!n.isSyncPost);t.setRequestHeader("Content-Type","application/json;charset=UTF-8");t.timeout=s;t.ontimeout=n.onerror;t.send(JSON.stringify(n.data))}function st(n){var t=new XDomainRequest;t.onerror=n.onerror;t.timeout=s;t.ontimeout=n.onerror;t.open("POST",f.eventEndpointUrl);t.send(JSON.stringify(n.data))}d()}var t=this.insp||(this.insp={});t.event=new n}).call(this);function ci(n){var t=this;var i={};this.logMetric=function(t,i){n.logMetric(t,i)};this.get_top_domain=function(){var n;n=location.hostname;t.logMetric("tld_"+n,1)};this.startTimer=function(n){var t=(new Date).getTime();i[n]=t};this.endTimer=function(n){var u=(new Date).getTime();var f=i[n];var r=u-f;t.logMetric(n,r);return r};this.initializeMetrics=function(){t.get_top_domain();if(window.performance&&window.performance.timing){var n=window.performance.timing;var i=(new Date).getTime();t.logMetric("t_dns",n.domainLookupEnd-n.domainLookupStart);t.logMetric("t_connect",n.connectEnd-n.connectStart);t.logMetric("t_done",i-n.navigationStart);t.logMetric("t_resp",n.responseStart-n.connectEnd)}}}var t=this.insp=this.insp||{};var ru=t.metrics=t.metrics||{};ru.rum=new ci(t.event);function pu(n){return r.getElementsByTagName(n)}function tr(){this._={};this.addScriptAsync=function(n,t){var u=r.getElementsByTagName("head")[0];var i=u.appendChild(r.createElement("script"));i.type="text/javascript";i.src=n;i.async="";i.defer="";i.onload=t};this.addScriptSync=function(n,t){r.write('<script type="text/javascript" src="'+n+'"><\/script>');if(t)r.write('<script type="text/javascript">'+this.createSingleUseCallback(t)+"();<\/script>")};this.beaconUrl=function(n){var t=r.createElement("img");t.src=n};this.addStyleContent=function(n){var t=r.createElement("style");t.type="text/css";if(t.styleSheet)t.styleSheet.cssText=n;else t.appendChild(r.createTextNode(n));var i=r.getElementsByTagName("head")[0];i.insertBefore(t,i.firstChild)};this.createSingleUseCallback=function(n,i){var u=Math.random()*(1<<30)|0;var r="_"+u;t._[r]=function(){delete t._[r];n.apply(i||this,arguments)};return"insp._."+r};this.buildUrl=function(t,i){i=u(n(t),i);t=f(t);return t+this.buildQueryString(i)};this.buildQueryString=function(n){var i=[];for(var r in n)if(n.hasOwnProperty(r)){var t=n[r];if(t||t===false||t===0)i.push(r+"="+encodeURIComponent(t))}var u="?";return i.length>0?u+i.join("&"):""};function f(n){return/(^[^?]+)/.exec(n)[0]}function n(n){var t={};n.replace(/[?&]([^=]+)=([^?&]+)/g,function(n,i,r){t[i]=decodeURIComponent(r)});return t}this.isDefinedAndNonNull=e;function e(n){return i(n)&&n!=null}this.isNullOrUndefined=o;function o(n){return!i(n)||n==null}this.isDefined=i;function i(n){return typeof n!="undefined"}this.getRefinementType=function(n){return n&&n.refinementType?n.refinementType:""};this.getRefinementKey=function(n){return n&&n.refinementKey?n.refinementKey:""};this.getCsid=function(n){return n&&n.csid?n.csid:""};this.getQueryStringParams=function(t){if(t.indexOf("?")<0)t="?"+t;return n(t)};this.getUrlParams=n;this.boldAll=function(n){n=(n||"").replace(/<.+?>/g,"");return"<strong>"+n+"<\/strong>"};this.getSafely=function(n){for(var t=1;n&&t<arguments.length;t++)n=n[arguments[t]];return n||null};this.doCrossDomainPost=function(n,t,i){var u=i||r.body;function e(n){var t=r.createElement("iframe");u.appendChild(t);t.style.display="none";t.contentWindow.name=n;t.name=n;t.id=n}function o(n,t,i){var f=r.createElement("form");f.target=n;f.action=t+"?"+Math.random().toString(36).substring(7);f.style.display="none";f.method="POST";for(var o in i)if(i.hasOwnProperty(o)){var e=r.createElement("input");e.type="hidden";e.name=o;e.value=JSON.stringify(i[o]);f.appendChild(e)}u.appendChild(f);f.submit()}var f="inspIframe_"+Math.random().toString(36).substring(7);e(f);o(f,n,t)};this.formatNumberWithCommas=function(n){return this.isNullOrUndefined(n)?n:n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}this.insp=u(this.insp||{},new tr);function wi(n){return function(t,r){var f=true;for(var u in t){if(!t.hasOwnProperty(u)||t[u]==="")i.addWarning(u+" is empty or null in "+r+" container");if(n.hasOwnProperty(u)){var e=n[u](t[u]);if(e){i.addWarning(u+" is invalid in "+r+' container with provided value of "'+t[u]+'"');f=false}}}return f}}function kr(n){return function(t){function f(n){return n==null||typeof n=="undefined"}for(var i in t)if(t.hasOwnProperty(i)){var r=n(i);var u=t[i];if(f(u)||r&&r(u))delete t[i]}}}function nu(n){return function t(t){function r(n,t){n=""+n;t=""+t;var i=t.toLowerCase().lastIndexOf(n.toLowerCase());return i!==-1&&i+n.length==t.length}for(var i in n)if(n.hasOwnProperty(i)&&r(i,t))return n[i]}}function ou(n,t){t=t||{};return function i(i){var r=t[i];if(!r)r=t[i]=n(i);return r}}function vt(n){return function(t){return!n(t)}}function lu(n){var t=typeof n=="function";var i=[];for(var r=t?1:0,u;u=arguments[r];r++)i.push(u);return function f(r){if(t)r=n(r);return i.indexOf(r)>-1}}function au(n,t,r,u){if(t<n)i.addError("max cannot be less than min");var f=!r;var e=!u;return function o(i){return f&&n==i||e&&t==i||n<i&&i<t}}function vu(){return function(n){return n!==parseInt(n,10)?true:n<0?true:false}}function b(n){var p=this;var t;var o;var s=false;var e;var h;this.init=function(n){e=n;h=w();o=e.adLoadedCallback};function w(){try{return new ai(e,f)}catch(n){i.catchAll(n)}return null}this.execute=function(i){t=i;s=false;t.repeatAdCount=t.pageBuilder.repeatAdCount(n);var r=t.pageBuilder.getElementIdsByGroup(n);if(r&&r.length){nt(r);var u=b();var f=g(r);_googCsa("ads",u,f)}};function b(){var n={query:t.params.query,adPage:t.params.page||1,adLoadedCallback:ht,visibleUrlsCallback:lt,adtest:it(t.params,f),location:false,domainLinkAboveDescription:true,linkTarget:t.params.linkTarget||"_blank"};if(st)n.adsResponseCallback=at;return u(n,k())}function k(){return{pubId:e.googlePubId,lines:e.adLinesCount,hl:e.language||"en",numRepeated:t.repeatAdCount,channel:e.googleChannelId,sellerRatings:e.enableSellerRatings,siteLinks:e.enableSiteLinks,heightConstrained:e.heightConstrained,clickableBackgrounds:e.enableClickableAdRegions,rolloverLinkUnderline:e.enableHoverUnderline,adsafe:d(),imageExtension:e.googleImageInAds}}function d(){return e.isAdultSafe===true?"high":"off"}function g(n){var i=[];for(var r=0,t;t=n[r];r++){ct(t.elementId);i.push(tt(t))}return i}function nt(n){var r="CSA: Invalid configuration: Repeat ad count. ";i.setPageBuilder(t.pageBuilder);if(t.repeatAdCount<0){i.addWarning(r+"repeatAdCount must be >= 0");c()}if(t.repeatAdCount>0){if(l("top",n)!==1){i.addWarning(r+"Requires exactly 1 top result block.");c()}if(l("bottom",n)<1){i.addWarning(r+"Requires at least 1 bottom result block.");c()}}}function l(n,t){var i=0;for(var r in t)if(t.hasOwnProperty(r))i+=t[r].group===n?1:0;return i}function c(){t.repeatAdCount=0}function tt(t){var i=t.group;var r=i==="top"&&t.absolutePositionOffset===0;var e=n==="pla"?r?"topPlas":"plas":r?"maxTop":"number";var f={container:ot(t.elementId),clicktrackUrl:et(i,t.absolutePositionOffset,t.originalPositionOffset)};f[e]=t.count;var o=rt(i,t.containerId);return u(f,ut(o))}function rt(n,i){var u=t.params.containers[n];for(var r=0;r<u.length;r++)if(u[r].id===i)return u[r];return null}function ut(n){var t=n&&n.styles;if(!t)return{};var i=ft(n);return{fontFamily:t.fontFamily,fontSizeTitle:t.titleFontSize,fontSizeDomainLink:t.urlFontSize,fontSizeDescription:t.textFontSize,colorTitleLink:t.titleColor,colorText:t.textColor,colorDomainLink:t.urlColor,colorBackground:t.backgroundColor,longerHeadlines:e.enableLongerHeadlines&&n!="right",width:t.width,titleBold:t.titleBold,noTitleUnderline:t.titleUnderline===false,rolloverLinkColor:t.rolloverLinkColor,detailedAttribution:i}}function ft(n){var t=n&&n.googleDetailedAttribution;if(!t)t=false;return t}function et(n,r,u){try{if(!h)i.addFatalError("Parameter is required: trackingUrlGenerator");return h.create(n,e.partnerClickTrackingUrl,r,u)}catch(f){i.setPageBuilder(t.pageBuilder);i.catchAll(f)}return null}function ot(t){var i=r.getElementById(t).appendChild(r.createElement("div"));i.className=n+"Wrapper";return i.id=t+"_"+n}function ht(n,t){if(t)a(n);if(o)o(n,t)}function ct(n){var t=r.getElementById(n);v(t,"hidden","hidden","0px")}function a(n){function i(n){for(var i=0;n.length&&i<n.length;i++){var t=n[i];if(t.style.visibility&&t.style.visibility=="hidden"){t.style.visibility="visible";t.style.height="auto"}}}var t=r.getElementById(n);v(t,"visible");i(t.childNodes)}function v(n,t,i,r){if(n){if(!i)i=null;if(!r)r=null;n.visibility=t;n.height=r;n.overflow=i}}function y(r,u){if(s===false){s=true;try{var f=new hi(t,n,"Google");f.markResultsRendered(r,u)}catch(e){i.catchAll(e)}t.onComplete(p,true)}}function lt(n){y(n.length,n)}function at(n){var r=0;try{for(var t in n)if(n.hasOwnProperty(t)){r+=n[t];if(n[t]>0)a(t)}}catch(u){i.catchAll(u)}y(r)}}function ti(){var s=this;var r;var e;var c="insp";this.providerLogName="insp";this.init=function(n){e=n};this.execute=function(t){try{r=t;var u=t.pageBuilder.getGroupNames("insp");if(u.length>0)if(t.response)h(t.response);else l(u);else r.onComplete(s,false)}catch(f){var e=r===n?n:r.pageBuilder;i.setPageBuilder(e);i.addError("Provider insp failed with error: "+f.toString())}};function l(n){var i=t.createSingleUseCallback(h);var r=a(n,i);t.addScriptAsync(r)}function a(n,i){var o=r.params;var s={site:o.site,segment:o.segment,"device-segment":e.deviceSegment,"device-type":e.deviceType,query:o.query,category:o.category,page:o.page,sort:o.sort,"family-friendly":e.isAdultSafe?"on":"off",qrpr:b(),"engine-language":k(),"engine-locale":d(),siteLinks:e.enableSiteLinks,groups:n.join(","),partnerclicktrackingurl:e.partnerClickTrackingUrl,actionId:e.actionId,adtest:it(o,f),userId:or(),refine:t.getRefinementType(o.shopping),rkey:t.getRefinementKey(o.shopping),csid:t.getCsid(o.shopping),"skip-server-logging":true,isFirstView:o.isFirstView,enableHoverUnderline:o.enableHoverUnderline,signature:o.signature,jsonp:i};if(o.testCase&&f.tmiParams){var h=f.tmiParams;h.testCase=o.testCase;u(s,h)}v(s);var c=r.urlResolver.resolve("insp",o);return t.buildUrl(c,s)}function v(n){if(n&&w()){var r=t.getUrlParams(location.search);if(r.webdebug){var f=decodeURIComponent(r.webdebug).split("|");var e={};for(var i=0;i<f.length;i++){var o=f[i].split(":");e[o[0]]=o[1]}u(n,e)}}}function y(n){if(n&&w())debugBEResponse=JSON.stringify(n,null,"\t")}function b(){var t="20";try{var n=parseInt(r.params.mainResultCount,et);if(n&&n>0)t=n}catch(u){i.catchAll(u)}return t}function h(t){try{var u=new g(r.pageBuilder);u.handleResponse(t);y(t)}catch(f){var e=r===n?n:r.pageBuilder;i.setPageBuilder(e);i.catchAll(f)}r.onComplete(s,true)}function k(){var n=e.language;return!n||/none|notspecified|unknown/i.test(n)?"en":n.toLowerCase()}function d(){var n=e.country;return!n||/none|notspecified|unknown/i.test(n)?"us":n.toLowerCase()}function g(n){var t={ad:{bucket:[],regions:["top"]},related:{bucket:[],regions:["related","relatedRepeat"]}};for(var f in t)if(t.hasOwnProperty(f))s(t[f]);function s(n){n.count=function(){return n.bucket.length};n.removeFromBucket=function(t){var i=n.bucket,r=i.indexOf(t);i.splice(r,1)}}this.handleResponse=function(n){var t=n.items;var s=n.error;o.maxAlgoResultCount=n.max_algo_result_count?parseInt(n.max_algo_result_count,et):0;if(n.search_response_details)tu(n.search_response_details.user_id);if(s)if(lt(s.error_code))i.addFatalError(ct);else i.addError("BE endpoint returned: "+s.description);if(t){h(t);for(var f=0;f<t.length;f++){var a=t[f];var l=a.items;for(var c=0;c<l.length;c++){var v=r(l[c]);u(t[f].type,v)}}e("related");e("ad")}else console.log("Unrecognized response for insp provider",n)};function h(n){var s={items:[]};var u,f,i;for(var o=0,e;e=n[o];o++){var h=e.type;if(h=="top"){n.splice(o--,1);for(f=e.items.length-1;u=e.items[f];f--){i=t[u.type];i.bucket.unshift(r(u,i.count,i.removeFromBucket))}}else if(h=="right"){n.splice(o--,1);for(f=0;u=e.items[f];f++){i=t[u.type];s.type=u.type;s.items.push(r(u,i.count,i.removeFromBucket))}}else if(h=="bottom"||h=="related"){n.splice(o--,1);for(f=0;u=e.items[f];f++){i=t[u.type];i.bucket.push(r(u,i.count,i.removeFromBucket))}}}i=t[s.type];if(i)Array.prototype.push.apply(i.bucket,s.items)}function e(n){var e=t[n],h=e.regions,o=e.bucket;function c(){return 0}function l(){return false}for(var s=0,r;r=h[s];s++){for(var i=0,f;f=o[i];i++){u(r,f);if(f!=o[i])i--}u(r,{type:n,adCount:c,hasRenderedInGroup:l,markAsRenderedInGroup:p,isFake:true})}}function r(n,t,i){var r={resultRenderData:n,display_url:n.display_url,url:n.url,type:n.type,resultProvider:l(n),paid:n.paid,adCount:t,impressionUrl:n.impression_url};function u(n){var t=[];var r=true;function f(n){return t.indexOf(n)!==-1}function u(u){if(u)t.push(u);if(r&&i){i(n);r=false}}n.hasRenderedInGroup=f;n.markAsRenderedInGroup=u;n.markAsRendered=u}u(r);return r}function l(n){var t=n.sources;return t&&t.length>0&&t[0].provider?t[0].provider:c}function u(t,i){return n.renderResult("insp",t,i)}}}function hi(n,t,i){this.markResultsRendered=r;function r(r,f){var l=r;var a=Math.min(n.repeatAdCount||0,l);var s=u();var o=0;var h;var e;var v;function c(n){return f?f[n]:v}for(e=0;e<l;e++){h=s[o++];n.pageBuilder.renderResult(t,h,{url:c(e),display_url:c(e),type:"ad",paid:true,resultProvider:i})}while(s[o]==="top"&&o<s.length)o++;for(e=0;e<a;e++){h=s[o++];n.pageBuilder.renderResult(t,h,{url:c(e),display_url:c(e),type:"ad",paid:true,resultProvider:i,isRepeated:true})}}function u(){var r=n.pageBuilder.getElementIdsByGroup(t);var i=[];for(var f in r)if(r.hasOwnProperty(f)){var e=r[f];for(var o=0;o<e.count;o++){var u=e.group;if(u==="top")i=[u].concat(i);else i.push(u)}}return i}}function wt(){this.breakApartAccessIdIntoSiteAndSegment=function(i){t(i);n(i)};function n(n){if(!n.site)i.addFatalError("Missing site in required parameter accessId.");if(!n.segment)i.addFatalError("Missing segment in required parameter accessId.")}function t(n){var t=n.accessId;var i=t.indexOf(".");var r=t.substring(i+1);var u=t.substring(0,i);n.site=u;n.segment=r}}function bt(){t.addScriptSync(f.scriptsUrl+"/advertisement.js");this.isAdBlockerPresent=function(){return!t.isAdScriptLoaded}}function kt(n){var r;var i;this.isConfigOriginServerside=false;this.getClientSettingsAsync=function(i,f,e){var o=t.createSingleUseCallback(u(f,e),this);var s=n.create(i,o);r=new Date;t.addScriptAsync(s);rt("csr_init_clientSettings_fetch")};function u(n,t){return function(){f();ut("csr_init_clientSettings_fetch");n.apply(t||null,arguments)}}this.getTimeoutInMilliseconds=function(){return i};function f(){var n=new Date-r;if(n>=1700){i=40000;t.event.logMetric("slow_speed_internet_users",1)}else if(n>=400){i=15000;t.event.logMetric("avg_speed_internet_users",1)}else{i=5000;t.event.logMetric("fast_speed_internet_users",1)}return i}}function dt(n,r){if(!n)i.addFatalError("Parameter is required: configUrlBase");if(!r)i.addFatalError("Parameter is required: deviceSegmentsHandler");this.create=function(u,e){if(!u)i.addFatalError("Parameter is required: params");var o={actionid:u.log&&u.log.actionId,site:u.site,segment:u.segment,"device-segments":r.toStringList(u.deviceSegments),"device-type":u.deviceType,"ad-lines-count":u.adLinesCount||u.googleAdLinesCount,query:u.query,category:u.category,page:u.page,"engine-language":u.language,"engine-locale":u.country,adtest:it(u,f),isFirstView:u.isFirstView,refine:t.getRefinementType(u.shopping),rkey:t.getRefinementKey(u.shopping),signature:u.signature,jsonp:e};return t.buildUrl(n,o)}}function gt(){var t={fontFamily:"arial",titleFontSize:16,titleColor:"12c",urlFontSize:13,urlColor:"093",textFontSize:13,textColor:"000",smallFontSize:13,smallColor:"999",backgroundColor:"fff",width:"auto",titleBold:false,titleUnderline:true,imageUrl:f.imageUrl};var i={related:{fontColor:"12c",fontSize:13},spelling:{fontColor:"12c",fontSize:12}};var n=["top","right","bottom","main","related","spelling"];this.populateContainerDefaults=function(n){if(!n)n={};r(n);e(n);return n};function r(t){for(var i=0;i<n.length;i++){var r=n[i];if(!t.hasOwnProperty(r))t[r]=[]}}function e(n){for(var f in n)if(n.hasOwnProperty(f)){var r=n[f];if(r==null)n[f]=r=[];if(r.length===0)r.push({});for(var e=0;e<r.length;e++){var o={id:"insp-search-"+f,styles:u(true,{},t,i[f]||{})};r[e]=u(true,{},o,r[e])}}}}var c="csruserid";var gi="uid";var d="3600";function nt(n,t,i,u){var f=new Date;f.setDate(f.getDate()+i);var e=escape(t)+(i==null?"":"; expires="+f.toUTCString())+"; domain="+u+"; path=/";r.cookie=n+"="+e}function or(){var n=tt(gi);var t=tt(c);if(n!=null&&t==null)nt(c,n,d,r.domain);if(n!=null&&n!=t)nt(c,n,d,r.domain);return t}function tt(n){if(r.cookie.indexOf(n)<0)return null;var i=n.indexOf("=")<0?n.length+1:n.length;var t=r.cookie.indexOf(n)+i;if(t>=0){var u=t+32;return r.cookie.substring(t,u)}else return null}function tu(n){if(n!=null&&tt(c)==null)nt(c,n,d,r.domain)}function ft(n){this._={};if(!n)i.addFatalError("Parameter is required: pageBuilder");this.createDetailsElement=function(n,t){var e=r.getElementById(n);var u=o();var h=s(t);u.appendChild(h);var f=e.nextSibling;var i;if(typeof f!="undefined"&&f!=null)i=f.cloneNode(true);else i=e.cloneNode(true);i.style.display="block";u.appendChild(i);return u};this.replaceElement=function(t,i){var u=r.getElementById(t);if(u){var f=r.createElement("div");f.innerHTML=u.innerHTML;f.id="old"+t;u.innerHTML="";u.appendChild(f);u.appendChild(i);n.showElement(t)}};this.reloadSERP=function(){var t=r.getElementById("localAdDetails");if(t){var i=t.parentElement;if(i){var u=r.getElementById("old"+i.id);if(u){i.removeChild(t);n.showElement(u.id);n.showContainers()}}}};this.findContainerByGroupType=function(n,t){var r=n.containers;if(r)for(var f in r)if(f.toUpperCase()==t.toUpperCase()){var u=r[f];for(var i=0;i<u.length;i++)if(u[i].id)return u[i].id}return null};function h(n,t){var i=n.children;if(i)for(var u=0;u<i.length;u++)if(i[u].className!="resultTitlePane"){var f=r.createElement("div");f.innerHTML=i[u].outerHTML;t.appendChild(f)}}this.showHiddenDetailElements=function(n){var i=t("hidden","WebSite",n);var r=t("hidden","Directions",n);var u=n.nextSibling;if(u)u.style.visibility="block";if(i&&i.href.toLowerCase().indexOf("clickhandler.ashx")>-1)i.className="";if(r&&r.href.toLowerCase().indexOf("clickhandler.ashx")>-1)r.className=""};function t(n,t,i){if(!n||!t)return null;var e=i?u(i,n):u(r,n);if(e)for(var o=0;o<e.length;o++){var s=e[o].innerText||e[o].text;if(s&&f(s.toLowerCase())==f(t.toLowerCase()))return e[o]}return null}function u(n,t){if(typeof n.getElementsByClassName!="undefined")return n.getElementsByClassName(t);var u=[];var f=new RegExp("(^| )"+t+"( |$)");var r=n.getElementsByTagName("*");for(var i=0,e=r.length;i<e;i++)if(f.test(r[i].className))u.push(r[i]);return u}function f(n){while(n.indexOf("'")>-1)n=n.replace("'","");return n}function o(){return e("searchResult adResult","","localAdDetails")}function c(n){return e("resultMoreDetailsTitlePane",n,"")}function s(n){var t=r.createElement("img");t.className="hidden";t.src=n;return t}function e(n,t,i){var u=r.createElement("div");if(n)u.className=n;if(t)u.innerHTML=t;if(i)u.id=i;return u}}function ni(){this.toStringList=function(n){if(n){var t=JSON.stringify(n).toString();t=t.replace(/["{}]/g,"");return t}return null}}var i=function(){var h;var i;var a="Sorry, an error has occurred, please try again later.";var c="error";var l="fatal";var v="warning";var p="unhandled error";var n;function r(n){this.message=n;this.status=v;this.stack=Error.call(this,n).stack;this.name="CSR Warning"}r.prototype=new Error;function u(n){this.message=n;this.status=c;this.stack=Error.call(this,n).stack;this.name="CSR Error"}u.prototype=new Error;function s(n){this.message=n;this.status=l;this.stack=Error.call(this,n).stack;this.name="CSR Fatal Error"}s.prototype=new Error;function e(n){this.message=n;this.status=p;this.stack=Error.call(this,n).stack;this.name="Unhandled Error"}e.prototype=new Error;function w(n){var i=new r(n);o(i);if(f.logWarnings)t.event.logWarning(i)}function b(n){var i=new u(n);o(i);t.event.logError(i)}function k(n){var i=new s(n);o(i);t.event.logFatal(i);if(i.status===l){nt();throw i;}}function o(t){if(!n)n={items:[]};n.items.push(t);if(n.status!=c)n.status=t.status;if(t instanceof r)console.warn("[CSR "+t.status+"] "+t.message,t);else console.error("[CSR "+t.status+"] "+t.message,t)}function d(n){if(!(n instanceof r)&&!(n instanceof u)&&!(n instanceof s)&&!(n instanceof e)){n=new e(n);if(!g(n.message))o(n);t.event.logError(n)}}function g(t){var r=false;if(n&&n.items)for(var i=0;i<n.items.length;i++)if(n.items[i].message.toString()==t){r=true;break}return r}function nt(){if(!i)i=new y(h,{});i.createElementWithError(a)}function tt(n,i,f,o,s){if(s instanceof r||s instanceof u||s instanceof e){n="This error was not caught by CSR.  "+n;t.event.logError({message:n,url:i,line:f,column:o,errorObj:s})}}t.event.registerWindowErrorHandler(tt);return{initialize:function(n,t){h=n,i=t},errors:function(){return n},addError:function(n){b(n)},addFatalError:function(n){k(n)},addWarning:function(n){w(n)},catchAll:function(n){d(n)},setPageBuilder:function(n){i=n}}}();function ii(f,c,a){if(!f)i.addFatalError("Parameter is required: containerBuilder");var p={};var v;var w=[];var st=0;var k;var d;var ht;var it;var et={doSearchTimerName:"csr_doSearch",doSearchServersideConfigOriginTimerName:"csr_doSearch_serversideconfig"};this.plugin=function(){e.setPlugins.apply(this,arguments)};this.loadDetails=function(n,t,i){d=new ft(k);var u=d.createDetailsElement(n,t);var r=d.findContainerByGroupType(v,i);if(r){at();d.replaceElement(r,u);vt("old"+r);window.scrollTo(0,0)}};this.reloadSERP=function(){if(!d)d=new ft(k);d.reloadSERP()};this.onBackButton=function(){this.reloadSERP()};this.doSearch=function(t){try{wt();i.initialize(t);bt(t);kt(t);s.logDoSearchParams(v);s.tryAddPreviousSearchInfo();at();nt("clientSettingsModule").getClientSettingsAsync(v,this.continueSearch,this)}catch(r){s.logError(r);v=v===n?t:v;i.setPageBuilder(new y(v,{}));i.catchAll(r);tt()}};function wt(){var n=nt("clientSettingsModule").isConfigOriginServerside;rt(n?et.doSearchServersideConfigOriginTimerName:et.doSearchTimerName,true)}function bt(){if(t.event&&t.event.logMetric)t.event.logMetric("version_"+t.search.version,1)}function kt(n){ti(n);n=dt(n);n.isFirstView=ni();c.validateAccessId(n);a.breakApartAccessIdIntoSiteAndSegment(n);ii(n);c.validate(n);v=gt(n);v.containers=f.populateContainerDefaults(v.containers);ri()}function dt(n){return lr.handleQueryConfigForVertical(n)}function gt(n){var t={category:"web"};return u({},t,n)}function ni(){var n=r.referrer;var t=window.location.hostname;if(!n)return true;var i=/:\/\/(.[^\/]+)/i;n=n.match(i)[1];return n.toLowerCase().indexOf(t.toLowerCase())!=-1?false:true}function ti(n){for(var t in n.containers)if(n.containers.hasOwnProperty(t)){var i=n.containers[t];if(typeof i=="string")n.containers[t]=[{id:i,style:{}}];else if(!h(i))n.containers[t]=[i]}}function ii(n){if(t.event)t.event.metadata={site:n.site,segment:n.segment}}function ri(){if(!v.searchUrlFormat)v.searchUrlFormat=ui()}function ui(){var n=(window.location||"").toString();var t=encodeURIComponent(v.query);return n.replace(t,"{searchTerm}")}function fi(){if(!k)k=new y(v,{});pt();k.disableShowing();ei();if(t.event){if(t.event.logMetric)t.event.logMetric("timeout_csr",1);if(t.event.logError)t.event.logError({Timeout:true,AccessId:v.accessId,Query:v.query,Category:v.category})}}function ei(){var n="";for(var r=0;r<w.length;r++)n+=w[r].name+", ";var u=n.length-2;n=n.substring(0,u);i.addWarning("Timeout occurred before some providers responded: "+n+".");s.logCsrTimeoutFlag(true);t.event.logMetric("level_"+it,1)}this.continueSearch=function(n){oi();var t=n.clientResponses;var i=si(n);if(i.isValid){u(p,n);hi();fu(p.deviceSegment?p.deviceSegment:p.requestedSegment);eu(p.deviceType);su(p.sortingForbidden);s.logConfig(p);ci();li();ai(v,t)}else tt()};function oi(){it=nt("clientSettingsModule").getTimeoutInMilliseconds();s.logCsrTimeout(it);ht=window.setTimeout(fi,it)}function si(n){var r={isValid:false};if(!n||g(n)){s.logError("InvalidConfig");i.addWarning("Segment configuration is invalid.");return r}else if(lt(n.error_code)){s.logError("NotAuthorized");i.addError(ct);return r}else if(!n.htmlTemplates||n.htmlTemplates.length<=0){i.addWarning("Missing Html Templates from Client Settings.");if(t.event&&t.event.logError)t.event.logError("Missing Html Templates from Client Settings.")}r.isValid=true;return r}function hi(){p.adLinesCount=v.adLinesCount||v.googleAdLinesCount||p.adLinesCount;p.partnerClickTrackingUrl=v.clickTrackingUrl||p.partnerClickTrackingUrl;if(v.adultFilter)if(v.adultFilter=="on")p.isAdultSafe=true;else p.isAdultSafe=false;if(p.enableSiteLinks&&v.siteLinks){p.enableSiteLinks=/^(all|oneLine)$/i.test(v.siteLinks);p.heightConstrained=/^oneLine$/i.test(v.siteLinks)}if(v.sellerRatings)p.enableSellerRatings=v.sellerRatings}function at(){var n=v.containers;if(n)for(var i in n)if(n.hasOwnProperty(i)){var t=n[i];for(var r in t)if(t.hasOwnProperty(r))vt(t[r].id)}}function vt(n){var t=r.getElementById(n);if(t){t.style.height="0px";t.style.visibility="hidden";t.style.overflow="hidden"}}function ci(){var r=nt("templateResolver");r.init(p.htmlTemplates);var n=p.containerStyleTemplates;var i={};for(var t=0;n&&t<n.length;t++)i[n[t].container.toLowerCase()]=n[t].css;p.cssTemplates={page:p.pageCss,containerTemplates:i}}function li(){function n(n,t){function f(n,t){var i=t.toLowerCase();return n.hasOwnProperty(i)?n[i]:n.any||""}function e(n,t){function f(n){function t(n){if(n){if(p.enableHoverUnderline===true)n.titleUnderline=false;n.titleDecoration=n.titleUnderline===false?"none":"underline";n.rolloverLinkUnderline=p.enableHoverUnderline===true?"underline":"none";n.titleDecorationOnHover=n.titleUnderline||p.enableHoverUnderline?"underline":"none"}}t(n.styles);return u({id:n.id},n.styles)}var r="";for(var i=0;i<n.length;i++){var e=f(n[i]);r+=l(t,e)}return r}var r=n.page||"";for(var i in t)if(t.hasOwnProperty(i))r+=e(t[i],f(n.containerTemplates,i));return r}if(!p.cssTemplates||!v.containers)return;var i=n(p.cssTemplates,v.containers);t.addStyleContent(i)}function yt(n){var t=null;if(p.layouts)t=p.layouts[n];if(!t)i.addWarning("There is no layout defined for the category:"+n);return t}function ai(n,r){try{var h=yt(n.category);var c=nt("layoutResolver");var f=new di(n,p,c);f.compile(h);var u={};var e=f.providers;k=f.pageBuilder;w=[];for(var o in e)if(e.hasOwnProperty(o))try{u=e[o];w.push(u);u.name=o;rt(u.name+"_provider");u.execute({params:v,pageBuilder:f.pageBuilder,urlResolver:nt("urlResolver"),onComplete:ot,response:r?r[u.name]:null})}catch(s){ot(u);i.catchAll(s)}if(w.length<1&&st<1){i.addWarning("No providers were called. Configuration or doSearch parameters may be wrong.");tt()}if(yr.isAdBlockerPresent()){window.setTimeout(l,200);t.event.logMetric("ad_blocker_detected",1)}}catch(s){i.catchAll(s);tt()}function l(){function i(n){return n instanceof b}for(var t=0,n;n=w[t];t++)if(i(n)){ot(n);break}}}function ot(n,t){var i=w.indexOf(n);if(i>-1)w.splice(i,1);if(t)st++;ut(n.name+"_provider");if(w.length===0&&v)tt()}function tt(){vi();pt()}function vi(){window.clearTimeout(ht)}function yi(n){for(var t in n)if(n.hasOwnProperty(t)){var e=n[t];for(var i=0,u;u=e[i];i++){var f=r.getElementById(u.id);if(f)return f}}return null}function pt(){window.setTimeout(function(){if(k)k.finalizeRendering(p);iu(yt(v.category));var n=pi();s.logCsrExecutionTime(n);if(s&&!p.disableClientLogging)s.sendLog(yi(v.containers));if(t.event&&t.event.logMetric)t.event.logMetric("accessId_"+v.accessId,1);if(v.onComplete)v.onComplete(o);if(v.onError)v.onError(i.errors())},0)}function pi(){var n=nt("clientSettingsModule").isConfigOriginServerside;return ut(n?et.doSearchServersideConfigOriginTimerName:et.doSearchTimerName)}function nt(n){return e.getPlugins()[n]}}var yt=function(){var n=["ar","iw"];return{isRightToLeft:function(t){if(t){t=t.toLowerCase();var i=-1<n.indexOf(t);if(i)return true}return false}}}();function di(n,t,r){if(!n)i.addFatalError("Parameter is required: params.");if(!t)i.addFatalError("Parameter is required: config.");var u={};var f=new y(n,t,u);this.providers=u;this.pageBuilder=f;this.compile=function(t){var i=r.resolveAll(t,n);for(var u in i)if(i.hasOwnProperty(u))e(u,i[u])};function e(n,i){f.addFromLayout(n,i);for(var r in u)if(u.hasOwnProperty(r))u[r].init(t)}}function ri(){this.resolveAll=function(n,t){var r={};if(t.containers)for(var i in n)if(n.hasOwnProperty(i)&&t.containers.hasOwnProperty(i)){var u=n[i];if(u)r[i]=u}return r}}if(typeof e=="object"&&e)e.getPlugins().layoutResolver=new ri;function fi(n){this.validate=function(n){if(!n)i.addFatalError("Parameter is required: params");this.validateAccessId(n);var t=n.containers;if(!t||g(t))i.addFatalError("Parameter is required: containers");for(var o in t)if(/^[A-Z]/.test(o))i.addFatalError("Container keys must all begin with a lowercase letter (camel case): "+o);if(typeof n.isTest!="undefined"&&typeof n.isTest!="boolean"){i.addWarning('Optional parameter "isTest" in doSearch() call must be a boolean.');n.isTest=null}if(typeof n.siteLinks!="undefined"&&!/^(none|oneLine|all)$/i.test(n.siteLinks)){i.addWarning('Optional parameter "siteLinks" in doSearch() call must be "none", "oneLine", or "all".');n.siteLinks=null}if(typeof n.sellerRatings!="undefined"&&typeof n.sellerRatings!="boolean"){i.addWarning('Optional parameter "sellerRatings" in doSearch() call must be a boolean.');n.sellerRatings=null}if(typeof n.googleAdLinesCount!="undefined"&&n.googleAdLinesCount!=1&&n.googleAdLinesCount!=2&&n.googleAdLinesCount!=3){i.addWarning('Optional parameter "googleAdLinesCount" in doSearch() call must be a 1, 2, or 3.');n.googleAdLinesCount=null}if(typeof n.adLinesCount!="undefined"&&n.adLinesCount!=1&&n.adLinesCount!=2&&n.adLinesCount!=3){i.addWarning('Optional parameter "adLinesCount" in doSearch() call must be a 1, 2, or 3.');n.adLinesCount=null}if(typeof n.linkTarget!="undefined"&&n.linkTarget!="_blank"&&n.linkTarget!="_top"){i.addWarning('Optional parameter "linkTarget" in doSearch() call must be "_blank" or "_top".');n.linkTarget="_blank"}if(typeof n.shopping!="undefined"&&typeof n.shopping!="object"){i.addWarning('Optional parameter "shopping" in doSearch() call must be an object.');n.shopping=null}u(n);f(n);b(n);h(n);this.validateContainers(t);y(n);d(n);v(n);s(n);e(n);nt(n);r(n)};this.validateAccessId=function(n){if(!n.accessId)i.addFatalError("Parameter is required: accessId");if(typeof n.accessId!="string")i.addFatalError("Required parameter accessId must be a string.");var t=n.accessId.indexOf(".");if(t<1)i.addFatalError("Required parameter accessId seems to be incorrectly formatted.");if(t==n.accessId.length-1)i.addFatalError("Required parameter accessId seems to be incorrectly formatted.")};function r(n){if(!n.searchUrlFormat){var r=null;for(var t in n.containers)if(t==="related"){r=t;i.addWarning("Warning: searchUrlFormat is not specified, we are going to guess value of searchUrl because CSR detected a related container");return}}}function u(n){if(typeof n.isFirstView!="undefined"&&typeof n.isFirstView!="boolean"){i.addWarning('Optional parameter "isFirstView" must be a boolean.');n.isFirstView=null}}function f(n){if(typeof n.enableHoverUnderline!="undefined"&&typeof n.enableHoverUnderline!="boolean"){i.addWarning('Optional parameter "enableHoverUnderline" must be a boolean.');n.enableHoverUnderline=null}}function e(n){if(o(n)&&!k(n.query))i.addWarning("Parameter is required: query")}function o(n){return!a(n,"shopping")}function s(n){if(a(n,"shopping")){if(t.isNullOrUndefined(n.shopping))i.addFatalError("shopping category use requires shopping configuration object (refer to SDK)");var u=n.shopping.refinementKey;var r=n.shopping.refinementType;if(t.isNullOrUndefined(u)&&t.isDefinedAndNonNull(r)||t.isNullOrUndefined(r)&&t.isDefinedAndNonNull(u))i.addFatalError("shopping.refinementKey and shopping.refinementType are mutually inclusive");if(t.isDefinedAndNonNull(r)&&t.isDefinedAndNonNull(u))if(typeof u=="string"&&typeof r=="string"){if(!/^(item|cat)$/i.test(r))i.addFatalError('Optional parameter "refinementType" in doSearch() call must be "item" or "cat".')}else i.addFatalError('Optional parameters "refinementKey" and "refinementType" in doSearch() call must be strings.')}}function h(n){if(t.isDefined(n.clickTrackingUrl)){var r=1000;var u='Optional parameter "clickTrackingUrl" in doSearch() call must be a string with length of 1000 or less.';if(typeof n.clickTrackingUrl!="string"){i.addWarning(u);n.clickTrackingUrl=null}else if(n.clickTrackingUrl.length>r){i.addWarning(u);n.clickTrackingUrl=c(n.clickTrackingUrl,r)}}}function c(n,t){n=n.substring(0,t-1);var i=n.lastIndexOf("&",t-1);n=n.substring(0,i)+"&truncated=true";return n}this.validateContainers=function(n){var t=0;for(var r in n)if(n.hasOwnProperty(r)){var u=n[r];if(u){var f=l(u,r);if(f)t=t+1}}if(t===0)i.addFatalError("None of the containers are valid.")};function l(t,i){for(var r in t)if(t.hasOwnProperty(r)){var u=t[r];if(!n(u,i))return false}return true}function v(n){if(n.log){if(n.log.fromClickableObjectId){n.log.fromClickableObjectId=parseInt(n.log.fromClickableObjectId,10);if(isNaN(n.log.fromClickableObjectId)||n.log.fromClickableObjectId<1){i.addWarning('Optional parameter "log.fromClickableObjectId" in doSearch() call must be an integer.');n.log.fromClickableObjectId=null}}if(n.log.fromClickableObjectPosition&&!n.log.fromClickableObjectPosition.toLowerCase){i.addWarning('Optional parameter "log.fromClickableObjectPosition" in doSearch() call must be a string.');n.log.fromClickableObjectPosition=n.log.fromClickableObjectPosition.toString()}if(n.log.previousActionId&&!n.log.previousActionId.toLowerCase){i.addWarning('Optional parameter "log.previousActionId" in doSearch() call must be a string.');n.log.previousActionId=null}if(n.log.actionId&&!n.log.actionId.toLowerCase){i.addWarning('Optional parameter "log.actionId" in doSearch() call must be a string.');n.log.actionId=null}}}function y(n){if(n.language&&!n.language.toLowerCase){i.addWarning('Optional parameter "language" in doSearch() call must be a string.');n.language=null}}function p(n){if(n.deviceType||n.deviceType==="")if(typeof n.deviceType=="string"&&n.deviceType!==""){if(!/^(desktop|mobile|tablet|other)$/i.test(n.deviceType)){i.addWarning('Optional parameter "deviceType" in doSearch() call must be "desktop", "tablet", "mobile", or "other".');n.deviceType="other"}}else{i.addWarning('Optional parameter "deviceType" in doSearch() call must be "desktop", "tablet", "mobile", or "other".');n.deviceType=null}}function w(n){if(n.deviceSegments){if(typeof n.deviceSegments!="object"){i.addWarning("Optional parameter 'deviceSegments' in doSearch() call must be an object like {mobile:'mobileSegment',tablet:'tabletSegment'}.");n.deviceSegments=null;return}if(!n.deviceSegments.mobile&&!n.deviceSegments.tablet){console.warn('[CSR Warning] Optional parameter "deviceSegments" in doSearch() call must contain at least one segment.');n.deviceSegments=null;return}for(var t in n.deviceSegments)if(n.deviceSegments.hasOwnProperty(t))if(t!=="mobile"&&t!="tablet")i.addWarning('Optional parameter "deviceSegments" in doSearch() call can only contain "mobile" or "tablet" segments.');else if(typeof n.deviceSegments[t]!="string"){i.addWarning('Optional parameter "deviceSegments" in doSearch() call, segment must be a string.');n.deviceSegments[t]=""}else if(n.deviceSegments[t]==="")i.addWarning('Optional parameter "deviceSegments" in doSearch() call, segment is empty string.')}}function b(n){p(n);w(n);if(n.deviceSegments&&n.deviceType){i.addWarning('When optional parameter "deviceType" in doSearch() call is passed in, deviceSegments will be ignored.');n.deviceSegments=null}}function k(n){return n&&n.length>0&&/[^\s]/.test(n)}function d(n){if(n.page){n.page=parseInt(n.page,10);if(isNaN(n.page)||n.page<1){n.page=1;i.addWarning('Optional parameter "page" in doSearch() call was set to 1 becausue it must be an integer greater than or equal to one.')}}else n.page=1}function nt(n){if(t.isNullOrUndefined(n.sort))return;if(typeof n.sort!="string"){i.addWarning('Optional parameter "sort" must be a string.');n.sort=null;return}n.sort=n.sort.trim().toLowerCase();if(!/^(notspecified|relevance|date|price|rating)(\/asc)?$/.test(n.sort)){i.addWarning('Optional parameter "sort" seems to be incorrectly formatted. Valid values are "NotSpecified", "relevance", "date", "price" and "rating".');n.sort=null}}}function a(n,t){return n.category&&n.category.toLowerCase()==t}if(e)e.getPlugins().providers={insp:new ti,csa:new b("csa"),pla:new b("pla")};function oi(){this.handleQueryConfigForVertical=function(n){var i=t.isDefinedAndNonNull(n.category)?n.category.toLowerCase():"web";return i=="shopping"?this.populateShoppingQueryConfig(n):n};this.populateShoppingQueryConfig=function(n){if(a(n,"shopping")){var r=t.getUrlParams(this.getLocationQueryStrings());if(t.isNullOrUndefined(n.shopping))i.addError("shopping category use requires shopping configuration object (refer to SDK)");if(t.isDefinedAndNonNull(r.refine)){n.shopping.refinementType=r.refine;n.shopping.refinementKey=r.rkey;n.shopping.csid=r.csid}}return n};this.getLocationQueryStrings=function n(){return location.search}}function yi(){return{mainResultCount:0,topResultCount:0,bottomResultCount:0,rightResultCount:0,relatedResultCount:0,spellingResultCount:0}}var o=yi();var ot={csa:"google",insp:"yahoo"};function cr(n,t){if(n&&t){var i=t;if(ot[t])i=ot[t];if(!o.adDisplayUrls)o.adDisplayUrls=[];var r={provider:i,url:gr(n)};o.adDisplayUrls.push(r)}}function gr(n){return n.replace(/<(?:.|\n)*?>/gm,"")}function ht(n,t){if(n){var i=n+"ResultCount";if(!o[i])o[i]=0;o[i]=o[i]+t}}function iu(n){var t=n&&n.main;t=h(t)?t:[];var i=t.length;o.maxAlgoPage=o.maxAlgoResultCount&&i?Math.ceil(o.maxAlgoResultCount/i):1}function fu(n){o.segment=n}function eu(n){o.deviceType=n}function su(n){o.sortingForbidden=n}function li(){var n={adsRendered:0,algoRendered:0,containsRepeatAds:false,intendedLayout:"",actualLayout:{},cookies:r.cookie,csrTimeoutFlag:false,csrExecutionTime:0,csrTimeout:0};var e={};this.getLogInfo=function(){return u({},n)};this.getActualLayoutPositions=function(){return e};this.tryAddPreviousSearchInfo=function(){var r=t.getUrlParams(location.search);if(r.insp){var i=t.getQueryStringParams(r.insp);n.previousActionId=n.previousActionId||i.pvaid;n.fromCoid=n.fromCoid||i.fcoid;n.contentCategory=n.contentCategory||i.ccat}};this.logDoSearchParams=function(t){n.query=t.query;n.category=t.category;n.page=t.page;n.country=t.country;n.language=t.language;n.signature=t.signature;n.accessId=t.accessId;n.site=t.site;n.segment=t.segment;n.isTest=typeof t.isTest=="boolean"?t.isTest:f.isTest;n.httpReferrer=r.referrer;n.hostName=r.location.hostname;h(t);if(t.log)o(t.log)};function o(t){n.extendedLogging=t.extendedLogging;n.fromCoid=t.fromClickableObjectId;n.fromCop=t.fromClickableObjectPosition;n.fromPid=t.fromPageId;n.previousActionId=t.previousActionId;s(t.extraAlgoRendered)}function s(t){if(t>0)n.algoRendered+=t}function h(t){if(t.shopping&&/^cat$/i.test(t.shopping.refinementType))n.contentCategory=t.shopping.refinementKey}this.logConfig=function(t){n.actionId=t.actionId;n.category=t.category;n.country=t.country;n.language=t.language;n.deviceSegment=t.deviceSegment;n.configSegment=t.configSegment;n.deviceType=t.deviceType;n.intendedLayout=t.intendedLayout;n.isFirstView=t.isFirstView;n.extraAds=t.extraAds};this.logResultRendered=function(t,i,r){if(t.type==="ad")n.adsRendered++;else if(i==="main")n.algoRendered++;if(t.isRepeated)n.containsRepeatAds=true;l(t,i,r)};this.logAdResultRemoved=function(t,i){function r(n,t){var i=e[n];if(i&&t)for(var r=i.length-1,u;u=i[r];r--)if(u.position===t.elementId){i.splice(r,1);break}}n.adsRendered--;r(t,i)};function c(n,t){return n.position<t.position?-1:n.position>t.position?1:0}function l(n,t,i){if(!e[t])e[t]=[];if(i){var r={resultProvider:n.resultProvider,paid:n.paid,position:i.elementId};e[t].push(r)}}function a(n){if(v(n))n.sort(c)}function v(n){if(n.length>0){var t=n[0].position;for(var i in n)if(n[i].position!=t)return true}return false}function y(){n.actualLayout={};for(var t in e){var i=e[t];if(e.hasOwnProperty(t)){a(i);if(!n.actualLayout[t])n.actualLayout[t]=[];for(var r=0;r<i.length;r++){var u=i[r].paid;var f=i[r].resultProvider;n.actualLayout[t].push(u===true?f:"nonpaid")}}}}this.logError=function(t){n.error=t.toString()};this.logCsrExecutionTime=function(t){n.csrExecutionTime=0;if(typeof t=="undefined"||t==null)i.addWarning("CSR Execution Time was null or undefined");else if(parseInt(t,10))n.csrExecutionTime=t;else i.addWarning("CSR Execution Time type must be integer")};this.logCsrTimeoutFlag=function(t){n.csrTimeoutFlag=false;if(typeof t=="undefined"||t==null)i.addWarning("CSR Timeout Flag was null or undefined");else if(typeof t=="boolean")n.csrTimeoutFlag=t;else i.addWarning("CSR Timeout Flag type must be boolean")};this.logCsrTimeout=function(t){n.csrTimeout=0;if(typeof t=="undefined"||t==null)i.addWarning("CSR Timeout Value was null or undefined");else if(parseInt(t,10))n.csrTimeout=t;else i.addWarning("CSR Timeout Value type must be integer")};this.sendLog=function(r){try{y();t.doCrossDomainPost(f.loggingEndpointUrl,{formQueryData:n},r)}catch(u){i.addError(u.toString())}}}function nr(n){var i="any";var r=f(n);function f(n){var t={};if(n&&n instanceof Array)for(var f=0,r;r=n[f];f++)t[e(r)]=r.html;else for(var u in n)if(n.hasOwnProperty(u))t[e({container:i,provider:i,type:u})]=n[u];return t}function e(n){return u(n.container,n.provider,n.type)}function u(n,t,i){var r=n+"-"+t+"-"+i;return r.toLowerCase()}this.init=function(n){r=f(n)};this.getTemplate=function(n){return h(n)};this.canResolveTemplate=function(n){if(!n)return null;var i=o(n);var r=s(i);return t.isDefinedAndNonNull(r)};function h(n){if(!n)return null;var t=o(n);return s(t)||c()}function o(n){return{container:n.container||i,provider:n.provider||i,type:n.type||i}}function s(n){return r[u(n.container,n.provider,n.type)]||r[u(i,n.provider,n.type)]||r[u(n.container,i,n.type)]||r[u(i,i,n.type)]}function c(){return r[u(i,i,i)]}}if(typeof e=="object"&&e)e.getPlugins().templateResolver=new nr;function ai(n){if(!n)i.addFatalError("Parameter is required: config.");if(!n.googleClickTrackingUrls||n.googleClickTrackingUrls.length<=0)i.addError("Click URL is not configured correctly.");var r=n.googleClickTrackingUrls[0];this.create=function(n,e,o,s){if(!n)i.addError("Parameter is required: regionName");var h={pct:e,cop:f(n),apo:o,epo:s};var c=u({},h);return t.buildUrl(r,c)};function f(n){switch(n){case"top":return"topnav";case"bottom":return"bottomnav";case"right":return"right";default:return null}}}function vi(){this.resolve=function(t,i){return/insp/i.test(t)?n(i):null};function n(n){var i=t.getUrlParams(location.search);return n&&n.testCase&&f.tmiParams&&w()?f.inspProviderServerDebugPath:i.webdebug&&w()?f.inspProviderServerDebugPath:f.inspProviderServerPath}}if(typeof e=="object"&&e)e.getPlugins().urlResolver=new vi;var et=10;debugBEResponse=null;function fr(n){return n.replace(/\d*\*/g,"")}function sr(n){var t=function(n){var t=/(\d*)\*/.exec(n);return!t?1:Number(t[1]||1<<30)}(n);var i=fr(n).split("|");return{providers:i,count:t}}function it(n,t){if(!n)i.addError("Parameter is required: params.");if(!t)i.addError("Parameter is required: environment.");return typeof n.isTest=="boolean"?at(n.isTest):at(t.isTest)}var ct="Partner is not authorized.";function lt(n){return g(n)?false:n.toString().match(/(NotAuthorized)/i)}function at(n){return n?"on":"off"}function rt(n,i){var r=t.metrics&&t.metrics.rum;if(r){if(i)r.initializeMetrics();r.startTimer(n)}}function ut(n){var i=t.metrics&&t.metrics.rum;if(i)return i.endTimer(n)}function w(){return f.inspProviderServerDebugPath&&f.inspProviderServerDebugPath.length>0?true:false}function y(n,r,f){var h;var nt;var tt;var k;var it;var o={};var d=[];var g=[];var l=this;var a={};var v;var rt=[];var ut={};var vt={ad:function(n){return{count:l.repeatAdCount(n),decrementCount:function(){return l.decrementRepeatAdCount(n)}}},related:function(){return{count:v,decrementCount:function(){return v>0&&v--}}}};var c;var ft;function yt(){function t(n){var r={};for(var t in n)if(n.hasOwnProperty(t)){var u=n[t];r[t]=[];for(var i=0;i<u.length;i++){var f=u[i].count;if(typeof f!="number")f=null;r[t].push({containerIds:[u[i].id],available:f})}}return r}function i(){var i=0;if(h){var n=h.relatedRepeat;if(n)for(var t in n)if(n.hasOwnProperty(t)&&n[t].count)i+=n[t].count}return i}function u(n){switch(n.toLowerCase()){case"synchronous":return function(n){var t=h[n];for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];r.shouldShow=true}};case"on result placement":return function(n){var t=h[n];for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];l.showElement(r.id)}};default:return p}}h=n.containers;nt=r.enableSynchronousDisplay?"synchronous":"on result placement";tt=e.getPlugins().providers;k=r.repeatAdCount;it=t(h);v=i();rt=[new pt,new wt];c=new ui;if(v)l.add(v+"*insp","relatedRepeat");ft=u(nt)}this.addFromLayout=function(n,t){function o(n,t){var i=n.providers[0];if(!a[i])a[i]=0;if(t<k)a[i]+=Math.min(k-t,n.count)}function s(n){for(var i=0,t;t=n[i];i++)if(t&&!f[t]){var r=tt[t];if(r)f[t]=r}}var r=0;var h=/top/i.test(n);for(var u=0,e;e=t[u];u++){var i=this.add(e,n);if(i){if(h){o(i,r);r+=i.count}s(i.providers)}}};this.repeatAdCount=function(n){return n&&a[n]||0};this.decrementRepeatAdCount=function(n){return n&&a[n]>0&&a[n]--};this.add=function(n,t,r){function p(n){var u=it[n];for(var i=0;i<u.length;i++){var t=u[i];var r=t.containerIds;if(t.available==null)return r;if(t.available>0)if(r){t.available--;return r}}return null}function w(n){var t=o[n]||(o[n]={isNotFull:function(){return t.capacity!==0},positions:[],capacity:0});return t}try{var v=p(t);var e=v&&v[0];if(e){var u=w(t);var h=u.positions.length;var s=h>0&&u.positions[h-1];var k=s&&s.containerId===e;var l=sr(n);var f=l.count;var a=false;var y=k&&b(s,n)?s.elementId:c.createElement(e,t,h);if(y){var d=l.providers[0];var g={provider:d,containerId:e,containerName:t,elementId:y,hasResults:function(){return a},isFilled:function(){return f===0},capacity:function(){return f},remainingRegionCapacity:function(){return u.capacity},decrementCapacity:function(){f--;u.capacity--;a=true},incrementCapacity:function(){f++;u.capacity++;a=false},executeDisplayStrategy:function(){ft(t)},isBackFillAd:function(){return r===true}};u.positions.push(g);if(!r)u.capacity+=f;return l}}}catch(nt){i.catchAll(nt)}};this.createElementWithError=function(n){function t(){var t="insp_errors";var n;if(h)if(h.main){var i=h.main;var u=i?i[0].id:t;n=u}else{var r=h[0];var f=r?r[0].id:t;n=f}else n=t;return n}var i=t();c.createElementWithError(n,i)};this.showContainers=function(){function r(){for(var r in o)if(o.hasOwnProperty(r)){var u=o[r].positions;for(var i=0,n=0,t;t=u[i];i++,n++){if(n>0&&t.elementId!=u[i-1].elementId)n=0;if(t.hasResults())c.undoRemoveElementLayoutSideEffects(t.elementId,n);else c.removeElementLayoutSideEffects(t.elementId,n)}}}for(var t in h)if(h.hasOwnProperty(t)){var u=h[t];for(var i=0,n;n=u[i];i++)if(n.shouldShow)l.showElement(n.id);else c.removeElementLayoutSideEffects(n.id)}r()};this.disableShowing=function(){c.disableShowing()};this.renderResult=function(n,t,i){function s(n){return/main/i.test(n)}function h(n){return/web/i.test(n.type)}function c(n){return/ad/i.test(n.type)}function l(n){return/related/i.test(n.type)}function a(n){return/insp/i.test(n)}function v(n,t,i){var e=ot(i.type);var o=st(i.type,n);for(var s=0,r;r=rt[s];s++){var f={repeatCount:o.count,decrementRepeatCount:o.decrementCount,saveBucket:e.save,repeatBucket:e.repeat};if(r.selector(n,t,i,f))return u(f,{shouldRender:r.execute(n,t,i,f)})}}var r;var e;if(s(t)||h(i))g.push(i);else if(c(i)||l(i))if(a(n)){var o=v(n,t,i);r=o.shouldRender;e=o.openSlotCount}else{i.canonicalUrl=lt(i.url);d.push(i);r=true}else r=true;if(r){var f=t?w(n,t):at(n);if(f){if(f.remainingRegionCapacity()<=0)bt(t);ct(f,i,t,n);return f}else if(e){var p=true;this.add(n,t,p);return y(n,t,i)}}};function et(){this.selector=function(n,t,i,r){var u=o[t];var f=u&&u.capacity;var e=!(i.hasRenderedInGroup&&i.hasRenderedInGroup(t));r.openSlotCount=f;return f>0&&e};this.execute=function(t,i,r,u){var f=u.saveBucket;var s=u.repeatBucket;var e=0;if(/bottom/i.test(i)||/relatedRepeat/i.test(i)){var h=r.adCount&&r.adCount()||0;e=n(t,i,u,h)}var c=!(e<(u.openSlotCount||0));if(c)return false;if(!r.isFake)s.push(r);var o=f.shift();if(o&&o!==r&&f.indexOf(r)===-1){if(!r.isFake)f.push(r);r=o}r.markAsRenderedInGroup(i);u.searchResult=r;return!r.isFake&&e<(u.openSlotCount||0)};function n(n,t,i,r){var e=i.openSlotCount||0;var o=Math.max(i.repeatCount,e-r);var f=0;while(f<o){var u=i.repeatBucket.shift();if(u){if(!u.hasRenderedInGroup(t)){var s=!i.decrementRepeatCount();u.isRepeated=true;u.markAsRenderedInGroup(t);y(n,t,u,s);f++}}else break}return f}}function pt(){et.call(this);var n=this.selector;this.selector=function(t,i,r,u){return/related/i.test(r.type)&&n(t,i,r,u)}}function wt(){this.selector=function(){return true};this.execute=function(n,t,i,r){if(!i.isFake)r.saveBucket.push(i)}}function ot(n){var t=ut[n];if(!t)t=ut[n]={save:[],repeat:[]};return t}function st(n,t){return vt[n].call(this,t)}function ct(i,u,f,e){function o(n,i,r,u){console.log("Rendered "+i+" "+r+" result. Remaining capacity: "+u.remainingRegionCapacity()+". ",n);s.logResultRendered(n,r,u);if(n.impressionUrl)t.beaconUrl(n.impressionUrl);ht(r,1);if(n.type=="ad"&&!n.isRepeated)cr(n.display_url,i)}i.decrementCapacity();if(u.resultRenderData){var h=new si;var l=h.execute(u.resultRenderData,f,u.resultProvider,r,n);c.render(i.elementId,l.html)}i.executeDisplayStrategy();o(u,e,f,i)}function bt(n){function i(){var u=o[n];var t=u.positions;for(var i=t.length-1,r;r=t[i];i--)if(r.isBackFillAd())return t.splice(i,1)[0];return null}function r(t,i){console.log("Removed "+i.provider+" "+n+" result. Remaining capacity: "+i.remainingRegionCapacity()+". ",t);s.logAdResultRemoved(n,i);ht(n,-1)}var t=i();if(t){t.incrementCapacity();var u=c.removeLastResult(t.elementId);r(u,t)}}function lt(n){n=""+n;return n?n.replace(/<.+?>/g,"").replace(/[?#].*/g,"").replace(/\/$/,"").replace(/.*?:\/\//g,"").toLowerCase():n}this.renderWebResults=function(n){function e(n){var i=lt(n.url);var r=false;for(var t=0;t<d.length;t++)if(i==d[t].canonicalUrl){r=true;console.log("De-duping algo result because a non-Yahoo ad has the same url: "+i);break}return r}if(n)console.log("Number of algo ads that need to be de-duped against CSA ads: "+g.length);else console.log("Algo/Web results will not be du-deduped against CSA ads (flag was not set to true)");var t;var r="main";var u=o[r];if(u)for(var f=0,i;u.isNotFull()&&(i=g[f]);f++){t=true;if(n)t=!e(i);if(t)y("insp",r,i)}};function y(n,t,i,r,u){var f=t?w(n,t):at(n);if(!f&&r){l.add(n,t,u);f=w(n,t)}if(f)ct(f,i,t,n);return f}this.showElement=function(n){c.showElement(n)};function at(n){for(var t in o)if(o.hasOwnProperty(t)){var i=w(n,t);if(i)return i}return null}function w(n,t){if(o[t]){var r=o[t].positions;if(r)for(var u=0,i;i=r[u];u++)if(!i.isFilled()&&b(i,n))return i}return null}this.getElementIdsByGroup=function(n){var e=[];var s=0;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i].positions;var r=[];for(var u=0,t;t=l[u];u++)if(b(t,n)){var h=r.length-1;var f=h>=0&&r[h];if(f&&f.elementId===t.elementId)f.count+=t.capacity();else{var c={group:i,elementId:t.elementId,containerId:t.containerId,count:t.capacity(),absolutePositionOffset:u,originalPositionOffset:s};r.push(c);e.push(c)}s++}}return e};function b(n,t){function i(n,t){for(var i=0;i<n.length;i++)for(var r=0;r<t.length;r++)if(n[i]===t[r])return true;return false}var r=n.provider.split("|");var u=t.split("|");return i(r,u)}this.getGroupNames=function(n){function r(n,t){for(var i=0;i<n.length;i++)if(b(n[i],t))return true;return false}var i=[];for(var t in o)if(o.hasOwnProperty(t)&&r(o[t].positions,n))i.push(t);return i};this.finalizeRendering=function(n){this.renderInspAds();this.renderWebResults(n.enableAdAlgoDeduping);this.showContainers()};this.renderInspAds=function(){var t=ot("ad");var h=["top","bottom","right"];for(var f=0,i;i=h[f];f++){var r=t.save.slice(0,t.save.length);if(r.length===0)r.push({isFake:true,markAsRenderedInGroup:p});for(var e=0,u;u=r[e];e++){var o=st("ad","insp");var n={repeatCount:o.count,decrementRepeatCount:o.decrementCount,saveBucket:t.save,repeatBucket:t.repeat};var s=new et;if(s.selector("insp",i,u,n))n.shouldRender=s.execute("insp",i,u,n);if(n.shouldRender){var c=n.openSlotCount>0;var l=n.openSlotCount>0;y("insp",i,n.searchResult,c,l)}}}};yt()}function ui(){var n=window.document;var t=true;this.render=function(t,i){var r=n.getElementById(t);if(r&&i){var u=r.appendChild(n.createElement("span"));u.innerHTML=i}};this.createElement=function(t,i,r){var u=n.getElementById(t);if(u){var f=["insp_result",i,r].join("_");var e=u.appendChild(n.createElement("div"));e.id=f;return f}return null};this.showElement=function(i){if(t){var u=n.getElementById(i);u.style.height=null;u.style.visibility="visible";r("display",u)}};this.disableShowing=function(){t=false};this.removeElementLayoutSideEffects=function(n,t){var r=i(n,t);if(r)r.style.display="none"};this.undoRemoveElementLayoutSideEffects=function(n,t){var u=i(n,t);r("display",u)};function i(t,i){var r=n.getElementById(t);if(typeof i!="undefined")r=r.childNodes[i];return r}this.createElementWithError=function(t,i){function r(t){var i=n.body.appendChild(n.createElement("div"));i.id=t}var u="error";var f=0;var e=n.getElementById(i);if(!e)r(i);var o=this.createElement(i,u,f);this.render(o,t);this.showElement(i)};function r(n,t){if(t&&t.style)if(t.style.removeProperty)t.style.removeProperty(n);else t.style.removeAttribute(n)}this.removeLastResult=function(t){var i=n.getElementById(t);if(i)if(i.lastElementChild)return i.removeChild(i.lastElementChild);else if(i.lastChild)return i.removeChild(i.lastChild);return null}}function si(){var c;var b;var y;var k;var o;var p;var tt;var ft;var n;var w;var d;this.execute=function(n,t,i,r,u){k=r;o=u;p=t;tt=i;c=n;y=e.getPlugins().templateResolver;b={container:p,provider:tt,type:c.type};d=o.linkTarget||"_blank";ft=cu();c=lt(c);c.html=pt();return c};function pt(){wt();bt();var t=y.getTemplate(b);return ot(t,true,n)}function wt(){n=[];oi();si();hi();ei();ci();fi();ui();ii();kt();dt();gt();ni();ti()}function bt(){w=[];ri()}function kt(){var t={rootType:"ad",injectedType:"contact",data:function(n){var t=s(n.items,"contact");return t?t:[]},migrateParentData:true};n.push(t)}function dt(){var t={rootType:"ad",injectedType:"address",data:function(n){var t=s(n.items,"contact");if(t&&t.items){var i=s(t.items,"address");return i?i:[]}return[]},migrateParentData:true};n.push(t)}function gt(){var t={rootType:"ad",injectedType:"phone",data:function(n){var t=s(n.items,"contact");if(t&&t.items){var i=s(t.items,"phone");return i?i:[]}return[]},migrateParentData:true};n.push(t)}function ni(){var t={rootType:"ad",injectedType:"phoneLink",data:function(n){var t=s(n.items,"contact");if(t&&t.items){var i=s(t.items,"phoneLink");return i?i:[]}return[]},migrateParentData:true};n.push(t)}function ti(){var t={rootType:"web",injectedType:"affiliate",data:function(n){var t=s(n.items,"affiliate");return t?t:[]},migrateParentData:true};n.push(t)}function ii(){var t={rootType:"ad",injectedType:"sellerrating",data:function(n){var t=s(n.items,"sellerrating");return t?t:[]},migrateParentData:true};n.push(t)}function ri(){var n={rootType:"ad",injectedType:"officialsitebadge",use:function(n){var i=s(n.items,"officialSiteBadge");return t.isDefinedAndNonNull(i)&&t.isDefinedAndNonNull(i.show_official_site_badge)&&i.show_official_site_badge=="1"}};w.push(n)}function ui(){var t={rootType:"ad",injectedType:"favicon",data:function(n){var t=s(n.items,"favicon");return t?t:[]}};n.push(t)}function fi(){var t={rootType:"ad",injectedType:"adimage",data:function(n){var t=s(n.items,"adimage");return t?t:[]},migrateParentData:true};n.push(t)}function lu(){var t={rootType:"ad",injectedType:"detailspage",data:function(n){return n}};n.push(t)}function et(n){if(n.items)for(var t=0;t<n.items.length;t++)if(n.items[t].type=="reviews")return n.items[t].items;return[]}function ei(){var t={rootType:"ad",injectedType:"review",data:function(n){var i=et(n);for(var f=0;f<i.length;f++){var t=i[f];if(t.rating&&t.rating>0)t=u(t,{showRating:"rating",star1:r(t.rating,1),star2:r(t.rating,2),star3:r(t.rating,3),star4:r(t.rating,4),star5:r(t.rating,5)});else t.showRating="hidden"}return i}};n.push(t)}function oi(){var t={rootType:"product",injectedType:"review",data:function(n){for(var t=0;t<n.items.length;t++)if(n.items[t].type=="reviews")return n.items[t].items;return[]}};n.push(t)}function si(){var t={rootType:"product",injectedType:"offer",data:function(n){for(var t=0;t<n.items.length;t++)if(n.items[t].type=="main")return n.items[t].items[0];return[]}};n.push(t)}function hi(){var t={rootType:"product",injectedType:"seller",data:function(n){for(var t=0;t<n.items.length;t++)if(n.items[t].type=="main")return n.items[t].items.slice(1);return[]},forceMap:true};n.push(t)}function ci(){var t={rootType:"category",injectedType:"subcategory",data:function(n){var r;var t=n.items||[];if(t.length>0)for(var i=0;i<t.length;++i)if(t[i].type=="categories"){r=t[i].items;break}return r||[]},forceMap:true};n.push(t)}function li(n){var r=true;if(n){var u=ht(n);var t=ki(u);if(t.length>0)for(var i=0;i<t.length;i++){var f=t[i].use;r=f(c)}}return r}function ot(n,i){var r=n;var u;do{u=di(r);r=vi(u,r)}while(!t.isNullOrUndefined(u));if(i)r=it(r,c);return r}function ai(n,t){var u="";var o=t.data;var r=o(c);if(typeof r!="object")i.addWarning("mapping requested but data provided is not an object - cannot transform");if(h(r)){var e=yi(r,t);for(var f=0;f<e.length;f++)u+=it(n,st(e[f],t.migrateParentData||false))}else u=it(n,st(r,t.migrateParentData||false));return u}function st(n,t){var i={};if(t)i=u(i,c);i=u(i,n);i=u(i,lt(i));return i}function ht(n){var t;if(n.type=="template")t=n.value.replace("template_","").replace("{","").replace("}","");else if(n.type=="wrapper")t=n.value.replace("{","").replace("}","");return t}function vi(n,r){var e;var u=b;var f;if(li(n)){if(t.isNullOrUndefined(n))return t.isNullOrUndefined(b.type)?r:y.getTemplate(u);u.type=ht(n);if(y.canResolveTemplate(u)){e=y.getTemplate(u);var o=wi(u.type);if(o.length>1)i.addWarning("multiple mappings for a single result type - cannot transform");else if(o.length==1)f=ai(e,o[0]);else f=ot(e,n.type=="template")}else f=""}else f="";r=r.replace(n.value,f);b.type=null;return r}function yi(n,t){var r=[];for(var i=0;i<n.length;i++)if(n[i].type==t.injectedType||pi(t))r.push(n[i]);return r}function pi(n){return n.forceMap===true}function wi(t){var r=[];for(var i=0;i<n.length;i++)if(n[i].injectedType.toLowerCase()==t.toLowerCase()&&n[i].rootType.toLowerCase()==c.type.toLowerCase())r.push(n[i]);return r}function ki(n){var i=[];for(var t=0;t<w.length;t++)if(w[t].injectedType.toLowerCase()==n.toLowerCase()&&w[t].rootType.toLowerCase()==c.type.toLowerCase())i.push(w[t]);return i}function di(n){var t=gi(n);if(t.length!==0)return{type:"wrapper",value:t[0]};var i=nr(n);return i.length!==0?{type:"template",value:i[0]}:null}function it(n,t){return l(n,t)}function ct(n,i){if(t.isNullOrUndefined(n)||!(n instanceof RegExp)||t.isNullOrUndefined(i))return[];var r=n.exec(i);return t.isNullOrUndefined(r)?[]:r}function gi(n){return ct(/(\{(?:wrapper_\w+)\})/g,n)}function nr(n){return ct(/(\{(?:template_\w+)\})/g,n)}function lt(n){var i=(n.title||n.name||"").replace(/<.+?>/g,"");var e="";var t=u(n,{type:dr(n),displayTitle:gr(n,p),title:i,target:d,description:nu(n,p),sanitizedUrl:tu(n.url),clickToCallUrl:n.click_to_call_url,directionsUrl:n.directions_url,displayDate:bi(n.date),deepLinks:ru(n.items,o,p,tt,k),cssClass:e,direction:ft,distance:uu(n),imageUrl:f.imageUrl,star1:r(n.rating,1),star2:r(n.rating,2),star3:r(n.rating,3),star4:r(n.rating,4),star5:r(n.rating,5),showPhone:n.click_to_call_url==null?"hidden":"",showDirections:n.directions_url==null?"hidden":"",showDisplayUrl:n.display_url==null?"hidden":"",showWeb:n.url==null?"hidden":""});t=iu(n,t);t=ir(n,t);t=fu(n,t);t=su(n,t);t=wr(n,t);t=ur(n,t);t=fr(n,t);t=er(n,t);t=eu(n,t);t=rr(n,t);t=or(n,t);return t}function v(n){return n.type.toLowerCase()}function s(n,t){for(var i=0;n&&i<n.length;i++)if(n[i]&&n[i].type.toLowerCase()==t.toLowerCase())return n[i]}function tr(){return"_"+Math.random().toString(36).substr(2,9)}function ir(n,t){function i(n,t){return n[t]&&n[t]!==""}function f(n){return i(n,"more_description")||i(n,"hours")||i(n,"payment")||i(n,"price")||i(n,"atmosphere")}if(v(t)=="ad"){var e=n.title?n.title.toString().replace(/["']/g,""):"";var o=n.more_details?n.more_details.toString():"";var r=tr();t=u(t,{displayTitleWithoutQuotes:e,loadDetails:"insp.search.loadDetails('"+r+"','"+o+"', '"+p+"');",reviewText:n.num_reviews?" "+n.num_reviews+" Reviews":"",showRating:n.rating>0?"rating":"hidden",showMap:i(n,"map_url")?"showMap":"hidden",showDescription:i(n,"more_description")?"showDescription":"hidden",showHours:i(n,"hours")?"showHours":"hidden",showPayment:i(n,"payment")?"showPayment":"hidden",showPrice:i(n,"price")?"showPrice":"hidden",showAtmosphere:i(n,"atmosphere")?"showAtmosphere":"hidden",showDivider:f(n)?"showDivider":"hidden",showReviewList:et(n).length>0?"reviewshow":"hidden",adIdentifier:r})}return t}function rr(n,i){if(v(i)=="app"){var f=i.rating;i=u(i,{star1:r(f,1),star2:r(f,2),star3:r(f,3),star4:r(f,4),star5:r(f,5),rating:f,price:n.price?"$"+n.price:"FREE",reviewText:n.rating_count?"(from "+t.formatNumberWithCommas(n.rating_count)+" users)":"",showRating:n.rating>0?"rating":"hidden"})}return i}function ur(n,t){if(t.type.toLowerCase()=="adimage")t=u(t,{image_url:n.image_url,url:n.url,target:d});return t}function fr(n,t){if(v(t)=="favicon")t=u(t,{favorite_icon_url:n.favorite_icon_url});return t}function er(n,t){if(v(t)=="sellerrating"){var i=n.rating;var f=n.reviewCount;t=u(t,{star1:r(i,1),star2:r(i,2),star3:r(i,3),star4:r(i,4),star5:r(i,5),reviewText:f?" "+f+" Reviews":"",reviewsourceurl:n.sourceUrl,target:d,showRating:i>0?"rating":"hidden",rating:i,reviewCount:f})}return t}function or(n,t){if(v(t)=="contact")if(n&&n.type==="contact")for(var i=0,r;r=n.items[i];i++){var u="template_"+v(r);t[u]="{"+u+"}"}return t}function sr(n){if(a(n,"shopping"))if(t.isNullOrUndefined(n.shopping.productDetailsUrlFormat))i.addError("shopping category search page use requires productDetailsUrlFormat to be specified (refer to SDK)")}function hr(n){if(v(n)!="product")return null;sr(o);var u=at(n);var r=o.shopping.productDetailsUrlFormat;if(u){r=r.replace(/(?:\{|%7B)searchTerm(?:\}|%7D)/ig,encodeURIComponent(o.query));r=vt(r,u);r=t.buildUrl(r,rt(n))}else i.addWarning("The product result has no enhanced data.");return r}function cr(n){if(a(n,"shopping"))if(t.isNullOrUndefined(n.shopping.categoriesUrlFormat))i.addError("shopping category page use requires categoriesUrlFormat to be specified (refer to SDK)")}function lr(n){if(v(n)!="category")return null;cr(o);var u=at(n);var r=o.shopping.categoriesUrlFormat;if(u){r=vt(r,u);r=t.buildUrl(r,rt(n))}else i.addWarning("The category result has no enhanced data.");return r}function at(n){return ar(n,"expansion")}function ar(n,t){if(h(n.enhanced_data)){var u=n.enhanced_data.length;for(var i=0;i<u;++i){var r=n.enhanced_data[i];if(r.type==t)return r}}return null}function vt(n,t){var r=n.indexOf("?")>-1;var i=r?n+"&":n+"?";i+="refine="+t.expansion_content;i+="&rkey="+t.result_key;i+="&csid="+t.csid;return i}function vr(n){return t.isDefinedAndNonNull(n.review_count)&&n.review_count!="0"}function yr(n){return t.isDefinedAndNonNull(n.price)&&t.isDefinedAndNonNull(n.price_sale)&&n.price!=n.price_sale}function pr(n){return t.isDefinedAndNonNull(n.expiration_date)&&n.expiration_date!==""||t.isDefinedAndNonNull(n.restrictions)&&n.restrictions!==""||t.isDefinedAndNonNull(n.dollars_off)&&n.dollars_off!=""}function g(n){if(n){if(n.toLowerCase()=="shopping")return true;if(n.toLowerCase()=="web")return true}return false}function wr(n,t){if(!g(o.category))return t;var i=br(n);if(i)t=u(t,{thumbUrl:i.source_url,thumbHeight:i.height,thumbWidth:i.width});return t}function br(n){if(n&&(n.type=="offer"||n.type=="product"||n.type=="category"||n.type=="deal")){var i=kr(o.shopping);var u=Number.MAX_VALUE;var f=Number.MAX_VALUE;if(n.items&&n.items.length>0&&n.items[0].items){var r=n.items[0].items.length;if(r&&r>0){var e=n.items[0].items[0];for(var t=1;t<r;t++)if(Math.abs(n.items[0].items[t].width-i)<u&&Math.abs(n.items[0].items[t].height-i)<f){e=n.items[0].items[t];u=i-n.items[0].items[t].width;f=i-n.items[0].items[t].height}return e}}}return null}function kr(n){return window.location.href.indexOf(n.productDetailsUrlFormat)>-1?320:250}function dr(n){return n.type==="video"&&/\.(swf|flv)/.test(n.thumb_url)?"videoSwf":n.type}function gr(n,i){var u=n.displayTitle||n.htmlTitle||n.title;var r=i&&o.containers[i];if(r){var f=r[0]&&r[0].styles;if(f&&f.titleBold)return t.boldAll(u)}return u}function nu(n,t){return nt(n.type,t).type==="image"?n.width+"x"+n.height+" - "+n.size+n.size_unit:n.description}function tu(n){var t=(n||"").match(/[&?]du=[^&]+/g);return!t?null:unescape(t[0].replace(/[&?]du=/,""))}function iu(n,r){function u(n){var u=o.searchUrlFormat;if(!u)return"#";var r="";try{r=u.replace(/(?:\{|%7B)searchTerm(?:\}|%7D)/ig,encodeURIComponent(n.title));r=t.buildUrl(r,rt(n));if(r.length>2048)i.addWarning("URL created with searchUrlFormat doSearch parameter was very long, and may not work in some browsers.")}catch(f){i.addWarning("getSecondarySearchUrl() failed with searchUrlFormat: "+u+" and result: "+JSON.stringify(n)+"\nException: "+f)}return r}if(/related/i.test(n.type)||/spelling/i.test(n.type))r.url=r.url||u(n);return r}function rt(n){var r=n.type=="spelling"?300:null;var i=o.shopping;var u=i&&/^cat$/i.test(i.refinementType)?i.refinementKey:null;var f={pvaid:k.actionId,fcoid:n.coid||r,ccat:u};return{insp:t.buildQueryString(f)}}function r(n,t){return n==null||n<=0?"":n<=t-1?"starEmpty":n<t?"starHalf":"starFull"}function ru(n,t,i,r,f){function h(n){var i=[];for(var t=0;n&&t<n.length;t++)if(n[t]&&n[t].type=="deeplink")i.push(n[t]);return i}function c(n,t){function e(){return f.heightConstrained?Math.min(n.length,2):n.length}var r=[];var o=e(n);for(var i=0;i<o;i++)r.push(u(n[i],{target:t.linkTarget||"_blank",prefix:f.heightConstrained&&i>0?" - ":""}));return r}function a(n){var u="";var f="";for(var t=0;t<n.length;t++){var o=t%2==0;if(o)u=u+e(n[t]);else f=f+e(n[t])}var s=ut(nt("deepLinksTwoColumn",i,r));return l(s,{column1:u,column2:f})}function v(n){var t="";for(var u=0;u<n.length;u++)t=t+e(n[u]);var f=ut(nt("deepLinksOneLine",i,r));return l(f,{deepLinks:t})}function e(n){var t=ut(nt("deepLink",i,r));return l(t,n)}if(f.enableSiteLinks!==true)return"";var o=h(n);if(!o||o.length<=0)return"";var s=c(o,t);return f.heightConstrained?v(s):a(s)}function uu(n){return n.distance!=null?n.distance+" mi":null}function fu(n,i){var r=v(i);if(!g(o.category))return i;if(r=="product"||r=="offer"||r=="review"||r=="seller"){var f=vr(n);i=u(i,{merchantUrl:n.url,manufacturer:n.manufacturer,price:n.price,originalPrice:n.original_price,onSale:n.on_sale&&n.on_sale.toLowerCase()=="true"?"On Sale":"",onSaleDisplay:n.on_sale&&n.on_sale.toLowerCase()=="true"||n.percentageOff&&n.percentageOff>0?"onSaleDisplay":"",percentageOff:n.percentageOff,detailsUrl:hr(n),ratingsDisplay:f?"ratingsDisplay":"",ratingsThumbUrl:n.rating_image_url,reviewCount:f?n.review_count:"",reviewText:f?"("+n.review_count+")":"",reviewTitle:n.summary,reviewer:n.author,reviewerTimestamp:ou(n.posted_date),reviewDescription:n.description,freeShipping:n.free_shipping?"Free Shipping":"",freeShippingDisplay:n.free_shipping?"freeShippingDisplay":"",prosDisplay:t.isDefinedAndNonNull(n.pros)?"prosDisplay":"",consDisplay:t.isDefinedAndNonNull(n.cons)?"consDisplay":"",bottomLine:t.isDefinedAndNonNull(n.bottom_line)?n.bottom_line:"",bottomLineDisplay:t.isDefinedAndNonNull(n.bottom_line)?"bottomLineDisplay":"",productDetailsSectionDisplay:t.isDefinedAndNonNull(n.description)?"productDetailsSectionDisplay":"",reviewSectionDisplay:t.isDefinedAndNonNull(n.review_count)&&n.review_count>0?"reviewSectionDisplay":"",sellerSectionDisplay:hu(n)>1?"sellerSectionDisplay":""})}return i}function eu(n,i){var r=v(i);if(!g(o.category))return i;if(r=="deal"){var f=yr(n);var e=pr(n);i=u(i,{merchantUrl:n.url,merchant:n.merchant_name,originalPrice:n.price,salePrice:n.price_sale,displayPriceComparison:f==true?"displayPriceComparison":"",percentOff:t.isDefinedAndNonNull(n.percent_off)&&n.percent_off!=""?n.percent_off:"",displayPercentOff:t.isDefinedAndNonNull(n.percent_off)&&n.percent_off!=""?"displayPercentOff":"",couponCode:n.coupon_code,displayCouponCode:t.isDefinedAndNonNull(n.coupon_code)&&n.coupon_code!=""?"displayCouponCode":"",dollarsOff:t.isDefinedAndNonNull(n.dollars_off)&&n.dollars_off!=""?"$"+n.dollars_off:"",displayDollarsOff:t.isDefinedAndNonNull(n.dollars_off)&&n.dollars_off!=""?"displayDollarsOff":"",expirationDate:n.expiration_date,displayExpirationDate:t.isDefinedAndNonNull(n.expiration_date)&&n.expiration_date!=""?"displayExpirationDate":"",restrictions:n.restrictions,displayRestrictions:t.isDefinedAndNonNull(n.restrictions)&&n.restrictions!=""?"displayRestrictions":"",displayMoreDealInfo:e==true?"displayMoreDealInfo":""})}return i}function ou(n){var t=new String(n);return t.match(/\d{2}[\/]\d{2}[\/]\d{4}/)}function su(n,t){if(!g(o.category))return t;if(v(n)=="category")t=u(t,{categoryUrl:lr(n)});return t}function hu(n){var i=s(n.items,"main");return t.isDefinedAndNonNull(i)&&h(i.items)?i.items.length:0}function cu(){return k.language&&yt.isRightToLeft(k.language)?'dir="rtl"':""}function ut(n){return y.getTemplate(n)}function nt(n,t,i){return{type:n,container:t,provider:i}}}var pt={fontFamily:vt(lu(function(n){return(""+n).toLowerCase()},"arial","times new roman","verdana","tahoma","georgia","trebuchet ms")),fontSize:vt(au(8,16))};var ir=ou(nu(pt));var ur={styles:kr(ir),count:vu()};var er=wi(ur);var hr=new wt;var s=new li;var lr=new oi;var ar=new gt;var vr=new fi(er);var yr=new bt;var wr=new ni;var br=new dt(f.segmentConfigUrl,wr);if(typeof e=="object"&&e)e.getPlugins().clientSettingsModule=new kt(br);var t=this.insp=this.insp||{};t.search=new ii(ar,vr,hr);t.search.version="2.20.1.462"}).call(this);
//# 
